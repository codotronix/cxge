window.cxgf={},function(i){window.cxgf.Utils={generateID:function(i){var o;for(i=i||"gobj";void 0===o||t.indexOf(o)>=0;)o=i+"-"+(Math.random()*parseInt(Math.random().toString().replace(/[.]/g,""))).toString().replace(/[.]/g,"-");return t.push(o),o},deleteID:function(i){t.splice(t.indexOf(i),1)}};var t=[]}(),function(i){function t(){n||(n=!0,o())}function o(){if(n){e++;for(var i in r)e%r[i].skipTick==0&&r[i].fn.apply(r[i].obj);e===s&&(e=0),setTimeout(o,1e3/60)}}i.cxgf.Ticker={onTick:function(o,n,e){var s=cxgf.Utils.generateID("ticker");return r.push({id:s,fn:o,obj:n||i,skipTick:void 0===e||e<0?1:e}),t(),s},startTick:t,stopTick:function(){n=!1}};var n=!1,r=[],e=0,s=27e6}(window),function(i){window.cxgf.KeyEvent={onKeyPress:function(i,o,n){void 0==t[i]&&(t[i]=[]),t[i].push({fn:o,obj:n})},keys:{LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32}};var t={};$(document).on("keydown",function(i){for(var o in t)if(i.keyCode==o)for(var n in t[o])t[o][n].fn.apply(t[o][n].obj)})}(),function(i){function t(){var i;for(var t in n){i=n[t];for(var r in i.group1)for(var e in i.group2)o(i.group1[r],i.group2[e])&&(void 0!==i.group1[r].onCollision&&i.group1[r].onCollision(i.group2[e]),void 0!==i.group2[e].onCollision&&i.group2[e].onCollision(i.group1[r]))}}function o(i,t){return!(i._objID===t._objID||i.x+i.width<t.x||i.x>t.x+t.width||i.y+i.height<t.y||i.y>t.y+t.height)}window.cxgf.Collision={watch:function(i,t){n.push({group1:$.isArray(i)?i:[i],group2:$.isArray(t)?t:[t]})},isColliding:o,isCollidingGroup:function(i,t){var n=$.isArray(i)?i:[i],r=$.isArray(t)?t:[t];for(var e in n)for(var s in r)if(o(n[e],r[s]))return!0;return!1}};var n=[];cxgf.Ticker.onTick(t)}(),function(i){function t(i){for(var t in i)this[t]=i[t];this._objID=cxgf.Utils.generateID("gobj"),this.x=this.x||0,this.y=this.y||0,this.speed=this.speed||1,this.speedX=this.speedX||this.speed,this.speedY=this.speedY||this.speed,this.directionSense=this.directionSense||4,this.holdDirectionNTurns=this.holdDirectionNTurns||9,this.gravityOn=this.gravityOn||!1,this.weight=this.weight||1,this.render()}function o(){for(var i=0;i<n.length;i++)n[i].gravityOn&&(n[i].y+=.5,cxgf.Collision.isCollidingGroup(n[i],r)&&(n[i].y-=.5),n[i].render())}window.cxgf.GameObject={create:function(i){var o=new t(i);return n.push(o),"ground"===o.type&&r.push(o),o},getAll:function(i){if(void 0===i)return n;for(var t=[],o=0;o<n.length;o++)for(var r in i)n[o][r]===i[r]&&t.push(n[o]);return t}};var n=[],r=[];t.prototype.render=function(){$("#"+this.htmlId).css({top:this.y+"px",left:this.x+"px"})},t.prototype.moveLeft=function(){this.x-=this.speedX||this.speed,this.direction="W",this.render()},t.prototype.moveRight=function(){this.x+=this.speedX||this.speed,this.direction="E",this.render()},t.prototype.moveUp=function(){this.direction="N",this.y-=this.speedY||this.speed,this.render()},t.prototype.moveDown=function(){this.direction="S",this.y+=this.speedY||this.speed,this.render()},t.prototype.move=function(i){"LEFT"===i||"W"===i?this.moveLeft():"RIGHT"===i||"E"===i?this.moveRight():"UP"===i||"N"===i?this.moveUp():"DOWN"===i||"S"===i?this.moveDown():"RANDOM-4"!==i&&void 0!==i||((!this._holdDirectionCounter||this._holdDirectionCounter>this.holdDirectionNTurns)&&("N"===this.prevDirection?this.direction=["N","E","W"][Math.floor(3*Math.random())]:"E"===this.prevDirection?this.direction=["N","E","S"][Math.floor(3*Math.random())]:"S"===this.prevDirection?this.direction=["E","S","W"][Math.floor(3*Math.random())]:"W"===this.prevDirection?this.direction=["N","S","W"][Math.floor(3*Math.random())]:this.direction=["E","W","N","S"][Math.floor(4*Math.random())],this.prevDirection=this.direction,this._holdDirectionCounter=0),this._holdDirectionCounter++,this.move(this.direction))},t.prototype.turnAround=function(){this.direction={E:"W",W:"E",N:"S",S:"N"}[this.direction],this.move(this.direction)},t.prototype.onCollision=function(i){},cxgf.Ticker.onTick(o)}();